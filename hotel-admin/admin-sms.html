<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMS Notifications - Tima Sara Hotel</title>
    <link rel="stylesheet" href="admin-style.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="admin-nav">
        <div class="nav-header">
            <a href="https://timasarahotel.com" target="_blank" style="text-decoration: none; color: inherit;">
                <div class="hotel-logo-small" style="cursor: pointer; transition: transform 0.3s ease;">
                    <h2>TIMA SARA</h2>
                    <p>HOTEL</p>
                </div>
            </a>
        </div>
        
        <ul class="nav-links">
            <li><a href="admin-dashboard.html">ğŸ“Š Dashboard</a></li>
            <li><a href="admin-reservations.html">ğŸ“… Reservations</a></li>
            <li><a href="admin-guests.html">ğŸ‘¥ Guests</a></li>
            <li><a href="admin-rooms.html">ğŸ  Rooms</a></li>
            <li><a href="admin-housekeeping.html">ğŸ§¹ Housekeeping</a></li>
            <li><a href="admin-pos.html">ğŸ½ï¸ Restaurant & Bar</a></li>
            <li><a href="admin-maintenance.html">ğŸ”§ Maintenance</a></li>
            <li><a href="admin-sms.html" class="active">ğŸ“± SMS Notifications</a></li>
            <li><a href="admin-analytics.html">ğŸ“ˆ Analytics</a></li>
            <li><a href="admin-invoices.html">ğŸ§¾ Invoices</a></li>
        </ul>
        
        <div class="nav-footer">
            <button id="logoutBtn" class="logout-btn">ğŸšª Logout</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="admin-main">
        <header class="page-header">
            <h1>SMS Notifications</h1>
            <div class="user-info">
                <span>ğŸ‘¤ Welcome, Admin</span>
            </div>
        </header>

        <div class="content-container">
            
            <!-- Quick Stats -->
            <div class="stats-grid" style="margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #e8f5e9;">âœ…</div>
                    <div class="stat-details">
                        <div class="stat-label">Sent Today</div>
                        <div class="stat-value" id="sentToday">-</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: #e3f2fd;">ğŸ“¨</div>
                    <div class="stat-details">
                        <div class="stat-label">Delivered</div>
                        <div class="stat-value" id="deliveredToday">-</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: #fff3e0;">â³</div>
                    <div class="stat-details">
                        <div class="stat-label">Pending</div>
                        <div class="stat-value" id="pendingSMS">-</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: #ffebee;">âŒ</div>
                    <div class="stat-details">
                        <div class="stat-label">Failed</div>
                        <div class="stat-value" id="failedSMS">-</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card" style="margin-bottom: 30px;">
                <h2 style="margin-bottom: 20px;">ğŸ“¤ Quick Actions</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                    <button onclick="openSendSMSModal()" class="action-card" style="background: linear-gradient(135deg, #4CAF50, #45a049);">
                        <div style="font-size: 32px; margin-bottom: 10px;">ğŸ“±</div>
                        <div style="font-weight: 700; font-size: 16px;">Send Custom SMS</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-top: 5px;">Send message to any guest</div>
                    </button>
                    
                    <button onclick="sendCheckInReminders()" class="action-card" style="background: linear-gradient(135deg, #2196F3, #1976D2);">
                        <div style="font-size: 32px; margin-bottom: 10px;">ğŸ¨</div>
                        <div style="font-weight: 700; font-size: 16px;">Send Check-in Reminders</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-top: 5px;">For tomorrow's arrivals</div>
                    </button>
                    
                    <button onclick="viewTemplates()" class="action-card" style="background: linear-gradient(135deg, #9C27B0, #7B1FA2);">
                        <div style="font-size: 32px; margin-bottom: 10px;">ğŸ“</div>
                        <div style="font-weight: 700; font-size: 16px;">Manage Templates</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-top: 5px;">Edit SMS templates</div>
                    </button>
                    
                    <button onclick="viewSettings()" class="action-card" style="background: linear-gradient(135deg, #FF9800, #F57C00);">
                        <div style="font-size: 32px; margin-bottom: 10px;">âš™ï¸</div>
                        <div style="font-weight: 700; font-size: 16px;">SMS Settings</div>
                        <div style="font-size: 13px; opacity: 0.9; margin-top: 5px;">Configure SMS gateway</div>
                    </button>
                </div>
            </div>

            <!-- SMS Logs -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>SMS Notification History</h2>
                    <div style="display: flex; gap: 10px;">
                        <select id="statusFilter" style="padding: 10px 15px; border: 2px solid var(--border-color); border-radius: 8px;">
                            <option value="all">All Status</option>
                            <option value="sent">âœ… Sent</option>
                            <option value="delivered">ğŸ“¨ Delivered</option>
                            <option value="pending">â³ Pending</option>
                            <option value="failed">âŒ Failed</option>
                        </select>
                        
                        <select id="typeFilter" style="padding: 10px 15px; border: 2px solid var(--border-color); border-radius: 8px;">
                            <option value="all">All Types</option>
                            <option value="booking_confirmation">ğŸ‰ Booking Confirmation</option>
                            <option value="check_in_reminder">ğŸ¨ Check-in Reminder</option>
                            <option value="check_out_reminder">ğŸ‘‹ Check-out Reminder</option>
                            <option value="custom">âœ‰ï¸ Custom</option>
                        </select>
                    </div>
                </div>
                
                <div id="smsLogsContainer">
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        Loading SMS history...
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Send SMS Modal -->
    <div id="smsModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>ğŸ“± Send SMS</h2>
                <button class="modal-close" onclick="closeSMSModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="smsForm">
                    <div class="form-group">
                        <label for="smsRecipient">Select Guest *</label>
                        <select id="smsRecipient" required>
                            <option value="">-- Loading guests --</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="smsPhone">Phone Number *</label>
                        <input type="tel" id="smsPhone" required placeholder="+233XXXXXXXXX" readonly>
                        <small style="color: var(--text-light);">Format: +233XXXXXXXXX (Ghana)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="smsTemplate">Use Template (Optional)</label>
                        <select id="smsTemplate">
                            <option value="">-- Custom Message --</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="smsMessage">Message *</label>
                        <textarea id="smsMessage" rows="6" required placeholder="Type your message..." maxlength="160"></textarea>
                        <div style="text-align: right; font-size: 12px; color: var(--text-light); margin-top: 5px;">
                            <span id="charCount">0</span>/160 characters
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">ğŸ“¤ Send SMS</button>
                        <button type="button" onclick="closeSMSModal()" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>âš™ï¸ SMS Settings</h2>
                <button class="modal-close" onclick="closeSettingsModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="alert alert-info" style="margin-bottom: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px; color: #1565c0;">
                    <strong>ğŸ“± SMS Provider:</strong> Hubtel SMS API (Ghana)<br>
                    <small>Sign up at <a href="https://www.hubtel.com/" target="_blank">hubtel.com</a> to get your API credentials</small>
                </div>
                
                <form id="settingsForm">
                    <div class="form-group">
                        <label for="settingClientId">Hubtel Client ID</label>
                        <input type="text" id="settingClientId" placeholder="Enter your Hubtel Client ID">
                    </div>
                    
                    <div class="form-group">
                        <label for="settingClientSecret">Hubtel Client Secret</label>
                        <input type="password" id="settingClientSecret" placeholder="Enter your Hubtel Client Secret">
                    </div>
                    
                    <div class="form-group">
                        <label for="settingSenderId">Sender ID</label>
                        <input type="text" id="settingSenderId" placeholder="TimaSara" maxlength="11">
                        <small style="color: var(--text-light);">Max 11 characters, no spaces</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="settingAutoSend" checked>
                            <span>Automatically send booking confirmations</span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="settingReminders" checked>
                            <span>Send check-in reminders (24 hours before)</span>
                        </label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">ğŸ’¾ Save Settings</button>
                        <button type="button" onclick="closeSettingsModal()" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/admin-script.js"></script>
    <script src="js/admin-sms.js"></script>
</body>
</html>